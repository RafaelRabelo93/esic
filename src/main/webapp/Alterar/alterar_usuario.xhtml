<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>

	<ui:composition template="/templates/template.xhtml">

		<ui:define name="content">
		
			<h:form id="edit_usuario" styleClass="cad_form" rendered="#{usuario.usuario.perfil ne '1' }">
				<p:growl id="growl" showDetail="true" sticky="true" /> 	
	
				<div class="ficha">

						<h:panelGroup id="dataPanel" styleClass="box">
						
							<h:outputText value="Alterar dados" style="color:#1a568c; font-size:35px; align-self: center; margin-bottom: 1em" />

						<h:panelGroup rendered="#{usuario.usuario.perfil eq '3' }">

							<h:outputText value="Dados Pessoais" style="color:#1a568c; font-size:25px; align-self: center; margin-top: 2em" />
							
							
							<h:panelGroup styleClass="inline">
								<h:panelGroup styleClass="column">
									<p:outputLabel value="Nome: " for="nome" />
									<p:inputText id="nome" size="40" value="#{usuario.usuario.nome}" />
								</h:panelGroup>
								
								<h:panelGroup styleClass="column" style="margin-left: 2vw">
									<p:outputLabel value="E-mail: " for="email" />
									<p:inputText  id="email" size="25" value="#{usuario.cidadao.email}" />
								</h:panelGroup>
							</h:panelGroup>
							
							<h:panelGroup styleClass="inline" style="align-items: flex-start;">
								<h:panelGroup styleClass="column">
									<p:outputLabel value="Tipo Pessoa: " for="tipo" />
									<p:selectOneMenu id="tipo" value="#{usuario.cidadao.tipo}"
										style="width:125px">
										<f:selectItem itemLabel="Física" itemValue="true" />
										<f:selectItem itemLabel="Jurídica" itemValue="false" />
									</p:selectOneMenu>
								</h:panelGroup>
								
								<h:panelGroup styleClass="column" style="margin-left: 2vw">
									<p:outputLabel value="Data de Nascimento: " for="datanasc" />
									<p:calendar styleClass="date" id="datanasc" yearRange="c-120:c"
										showOn="button" value="#{usuario.cidadao.datanasc}"
										locale="pt_BR" effect="slideDown" navigator="true"
										pattern="dd/MM/yyyy" mask="true" timeInput="false">
										<f:convertDateTime pattern="dd/MM/yyyy"/>
									</p:calendar>
								</h:panelGroup>
								
								<h:panelGroup styleClass="column" style="margin-left: 2vw">
									<p:outputLabel value="Gênero: " for="sexo" />
									<p:selectOneRadio id="sexo" value="#{usuario.cidadao.sexo}"	layout="pageDirection">
										<f:selectItem itemLabel="Masculino" itemValue="M" />
										<f:selectItem itemLabel="Feminino" itemValue="F" />
									</p:selectOneRadio>
								</h:panelGroup>
							</h:panelGroup>
								
							<h:panelGroup styleClass="inline">
								<h:panelGroup styleClass="column">
									<p:outputLabel value="CPF/CNPJ: " for="cpf" />
									<p:inputMask id="cpf" value="#{usuario.cidadao.cpf}" mask="999.999.999-99" />
								</h:panelGroup>
								
								<h:panelGroup styleClass="column"  style="margin-left: 2vw">
									<p:outputLabel value="RG: " for="rg" />
									<p:inputMask id="rg" value="#{usuario.cidadao.rg}"	mask="?9999999999999999" />
								</h:panelGroup>
								
								<h:panelGroup styleClass="column" style="margin-left: 2vw">
									<p:outputLabel value="Órgão Expedidor: " for="orgao" />
									<p:inputText id="orgao" value="#{usuario.cidadao.orgaexp}" style="width:125px" />
								</h:panelGroup>
							</h:panelGroup>
							
							<h:panelGroup styleClass="inline" style="align-items: flex-start;">
								<h:panelGroup styleClass="column">
									<p:outputLabel value="Escolaridade: " for="escolaridade" />
									<p:selectOneMenu id="escolaridade" value="#{usuario.cidadao.escolaridade}">
										<f:selectItem itemLabel="Selecionar" itemValue="" />
										<f:selectItem itemLabel="Analfabeto" itemValue="1" />
										<f:selectItem itemLabel="Semi-Analfabeto" itemValue="2" />
										<f:selectItem itemLabel="Fundamental" itemValue="3" />
										<f:selectItem itemLabel="Ensino Médio Incompleto" itemValue="4" />
										<f:selectItem itemLabel="Ensino Médio Completo" itemValue="5" />
										<f:selectItem itemLabel="Ensino Superior Incompleto" itemValue="6" />
										<f:selectItem itemLabel="Ensino Superior Completo" itemValue="7" />
									</p:selectOneMenu>
								</h:panelGroup>
								
								<h:panelGroup styleClass="column" style="margin-left: 2vw">
									<p:outputLabel value="Renda:" for="renda" />
									<p:selectOneMenu id="renda" value="#{usuario.cidadao.renda}">
										<f:selectItem itemLabel="Selecionar" itemValue="" />
										<f:selectItem itemLabel="Sem renda" itemValue="0" />
										<f:selectItem itemLabel="Até 2 SM*" itemValue="1" />
										<f:selectItem itemLabel="De 2 a 4 SM*" itemValue="2" />
										<f:selectItem itemLabel="De 4 a 10 SM*" itemValue="3" />
										<f:selectItem itemLabel="De 10 a 20 SM*" itemValue="4" />
										<f:selectItem itemLabel="Acima de 20 SM*" itemValue="5" />
									</p:selectOneMenu>
									<p:outputLabel value="* SM = Salário Mínimo" style="color:gray; font-size:12px; margin: 0"/>
								</h:panelGroup>
							</h:panelGroup>
	
							<h:outputText value="Endereço" style="color:#1a568c; font-size:25px; margin-top: 1em;" />
											
							<h:panelGroup styleClass="inline">
								<h:panelGroup styleClass="column">
									<p:outputLabel value="CEP:" for="cep" />
									<p:inputMask id="cep" value="#{usuario.cidadao.cep}" mask="99999-999" onblur="pesquisacep(#{usuario.cidadao.cep})" />
								</h:panelGroup>
							
								<h:panelGroup styleClass="column" style="margin-left: 2vw">
									<p:outputLabel value="Cidade:" for="cidade" />
									<p:inputText id="cidade" value="#{usuario.cidadao.cidade}" />
								</h:panelGroup>
								
								<h:panelGroup styleClass="column" style="margin-left: 2vw">
									<p:outputLabel value="Estado: " for="uf" />
									<p:selectOneMenu id="uf" value="#{usuario.cidadao.estado}" style="width:125px">
										<f:selectItem itemLabel="Selecionar" itemValue="" />
										<f:selectItem itemLabel="Acre" itemValue="AC" />
										<f:selectItem itemLabel="Alagoas" itemValue="AL" />
										<f:selectItem itemLabel="Amapá" itemValue="AP" />
										<f:selectItem itemLabel="Amazonas" itemValue="AM" />
										<f:selectItem itemLabel="Bahia" itemValue="BA" />
										<f:selectItem itemLabel="Ceará" itemValue="CE" />
										<f:selectItem itemLabel="Distrito Federal" itemValue="DF" />
										<f:selectItem itemLabel="Espirito Santo" itemValue="ES" />
										<f:selectItem itemLabel="Goiás" itemValue="GO" />
										<f:selectItem itemLabel="Maranhão" itemValue="MA" />
										<f:selectItem itemLabel="Mato Grosso" itemValue="MT" />
										<f:selectItem itemLabel="Mato Grosso do Sul" itemValue="MS" />
										<f:selectItem itemLabel="Minas Gerais" itemValue="MG" />
										<f:selectItem itemLabel="Pará" itemValue="PA" />
										<f:selectItem itemLabel="Paraíba" itemValue="PB" />
										<f:selectItem itemLabel="Paraná" itemValue="PR" />
										<f:selectItem itemLabel="Piauí" itemValue="PI" />
										<f:selectItem itemLabel="Rio de Janeiro" itemValue="RJ" />
										<f:selectItem itemLabel="Rio Grande do Norte" itemValue="RN" />
										<f:selectItem itemLabel="Rio Grande do Sul" itemValue="RS" />
										<f:selectItem itemLabel="Rondônia" itemValue="RO" />
										<f:selectItem itemLabel="Roraima" itemValue="RR" />
										<f:selectItem itemLabel="Santa Catarina" itemValue="SC" />
										<f:selectItem itemLabel="São Paulo" itemValue="SP" />
										<f:selectItem itemLabel="Sergipe" itemValue="SE" />
										<f:selectItem itemLabel="Tocantins" itemValue="TO" />
									</p:selectOneMenu>
								</h:panelGroup>
							</h:panelGroup>
							
							<h:panelGroup styleClass="inline">
								<h:panelGroup styleClass="column">
									<p:outputLabel value="Logradouro:" for="logradouro" />
									<p:inputText id="logradouro" value="#{usuario.cidadao.endereco}" size="40" />
								</h:panelGroup>
								
								<h:panelGroup styleClass="column" style="margin-left: 2vw">
									<p:outputLabel value="Bairro: " for="bairro" />
									<p:inputText id="bairro" value="#{usuario.cidadao.bairro}" />
								</h:panelGroup>
							</h:panelGroup>
							
							<h:panelGroup styleClass="inline">
								<h:panelGroup styleClass="column">
									<p:outputLabel value="Número:" for="numero" />
									<p:inputText id="numero" value="#{usuario.cidadao.numero}" size="10" />
								</h:panelGroup>
								
								<h:panelGroup styleClass="column" style="margin-left: 2vw">
									<p:outputLabel value="Complemento: " for="complemento" />
							<p:inputText id="complemento" value="#{usuario.cidadao.complemento}" size="40" />
								</h:panelGroup>
							</h:panelGroup>
							
						</h:panelGroup>

					<p:commandLink class="botaoLink" id="altUsuario" onclick="PF('dlg2').show();">
						<h:outputText value="Salvar alterações" onkeyup="if((event.keyCode==13)||(window.event.keyCode==13)){document.getElementById('altUsuario').click();}" />
						<i class="fa fa-check-square-o" style="color: white; padding-left: 3px" />
					</p:commandLink>

	</h:panelGroup>
					</div>

			</h:form>
			
			<p:dialog header="Confirmar senha" widgetVar="dlg2" modal="true" showHeader="true" fitViewport="true" showEffect="fade" hideEffect="fade" resizable="false" maximizable="false" draggable="false" closeOnEscape="true">
				<h:form id="dialog">
					<p:outputPanel id="dlg" styleClass="divBtn" style="max-width: 690px">
							<p:outputLabel value="Confirmar senha:" for="senha1" />
							<p:password id="senha1" required="true"	placeholder="Digite sua senha" value="#{usuario.senha}" />

							<p:commandLink class="botaoLink" id="confSenha" actionListener="#{usuario.edit}" style="margin-top: 10px; margin-bottom: 0;"  oncomplete="PF('dlg2').hide();" 
								onkeyup="if((event.keyCode==13)||(window.event.keyCode==13)){document.getElementById('confSenha').click();}" update="@all edit_usuario:growl">
								<h:outputText value="Confirmar" />
								<i class="fa fa-check-square-o" style="color: white; padding-left: 3px" />
	
								 <f:setPropertyActionListener value="#{usuario.email}" target="#{cidadao.email}" /> 
								 <f:setPropertyActionListener value="#{usuario.usuario}" target="#{cidadao.usuario}" /> 
								 
								 <f:setPropertyActionListener value="#{usuario.email}" target="#{responsavel.email}" /> 
								 <f:setPropertyActionListener value="#{usuario.usuario}" target="#{responsavel.usuario}" /> 

							</p:commandLink>

					</p:outputPanel>
				</h:form>

			</p:dialog>

		</ui:define>

	</ui:composition>

</h:body>
</html>