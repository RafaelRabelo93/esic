<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>

	<ui:composition template="/templates/template.xhtml">

		<ui:define name="content">

			<h:form id="cad_competencias2" styleClass="cad_form">

				<div class="ficha">

					<!--		Mensagens de Erro		-->
					<p:messages id="messages" showDetail="true" autoUpdate="true"
						closable="true" />

					<p:steps activeIndex="1" styleClass="custom" readonly="true">
						<p:menuitem value="Entidade" url="#" />
						<p:menuitem value="Competências" url="#" />
					</p:steps>

					<h:outputText
						value="Os campos abaixo marcados com * são de preenchimento obrigatório."
						style="color:gray; align-self: flex-start; padding-top: 2vw;" />

					<p:panelGrid style="margin-bottom:1vw">

						<f:facet name="header">
							<p:row>
								<p:column colspan="2" />
							</p:row>
							<p:row>
								<p:column colspan="2">
									<h:outputText value="Cadastro de Competências"
										style="color:#1a568c; font-size:25px; padding-bottom: 2vw;" />
								</p:column>
							</p:row>
							<p:row>
								<p:column colspan="2" />
							</p:row>
						</f:facet>

						<p:row>
							<p:column>
								<h:outputText id="teste"
									value="#{competencias.competencias.entidades.nome}" />
							</p:column>
						</p:row>

						<p:row>
							<p:column>
								<p:outputLabel value="Ações: " for="acoes" />
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:selectOneMenu id="acoes" value="#{competencias.idAcoes}">
									<f:selectItem itemLabel="Selecione" itemValue="0" />
									<f:selectItems value="#{competencias.acoes}" var="acs"
										itemLabel="#{acs.titulo}" itemValue="#{acs.idAcoes}" />
								</p:selectOneMenu>

								<p:column>
									<p:commandLink class="botaoLinkIcon" update="cadAcao"
										onclick="PF('detalheDialog').show(); PF('detalheDialog').toggleMaximize();">
										<i class="fa fa-plus" />
									</p:commandLink>
								</p:column>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Descrição: " for="descricao" />
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:inputTextarea id="descricao" counter="display"
									value="#{competencias.competencias.descricao}" maxlength="200"
									autoResize="false" style="width:100%"
									counterTemplate="{0} caracteres restantes." />
							</p:column>
						</p:row>

						<p:row>
							<p:column>
								<p:commandLink value="Adicionar"
									action="#{competencias.addLista}" update="panel_competencias acoes" />
									
							
							</p:column>
						</p:row>
						<p:row>
						<p:column>
								<h:panelGroup id="panel_competencias">

									<p:dataTable var="comp"
										value="#{competencias.listCompetencias}">
										<f:facet name="header">
								            Competências
								        </f:facet>
										<p:column headerText="Órgão/Entidade">
											<h:outputText value="#{comp.entidades.nome}" />
										</p:column>
										<p:column headerText="Ações">
											<h:outputText value="#{comp.acoes.titulo}" />
										</p:column>
										<p:column headerText="Descrição">
											<p:inplace editor="true">
												<p:inputTextarea value="#{comp.descricao}" />
											</p:inplace>	
										</p:column>
										<p:column style="width:32px;text-align: center">
											<p:commandButton update="@all" icon="ui-icon-search"
												title="View">
												<f:setPropertyActionListener value="#{comp}"
													target="#{competencias.competencias}" />
											</p:commandButton>
										</p:column>
									</p:dataTable>

								</h:panelGroup>
							</p:column>
						</p:row>
						

						</p:panelGrid>
							


						
					

					<p:commandLink class="botaoLink" action="#{competencias.save}">
						<h:outputText value="Salvar" />
						<i class="fa fa-check" style="color: white; padding-left: 3px" />
					</p:commandLink>

				</div>

			</h:form>

			<p:dialog widgetVar="detalheDialog" modal="true" showHeader="true"
				header="Cadastro de Ação" showEffect="fade" hideEffect="fade"
				closeOnEscape="true">
				<p:outputPanel id="cadAcao">
					<p:panelGrid columns="1" style="width:40%">
						<p:outputLabel value="Titulo: " for="titulo" />
						<p:inputText id="titulo" />

						<p:outputLabel value="Descrição:" for="descricao" />
						<p:inputTextarea id="descricao" counter="display" maxlength="200"
							autoResize="false" style="width:40%"
							counterTemplate="{0} caracteres restantes." />
						<h:outputText id="display" />

					</p:panelGrid>

				</p:outputPanel>
			</p:dialog>


		</ui:define>

	</ui:composition>

</h:body>
</html>

