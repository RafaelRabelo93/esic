<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>

	<ui:composition template="/templates/template.xhtml">

		<ui:define name="content">

			<h:form id="cad_competencias2" styleClass="cad_form" rendered="#{usuario.usuario.perfil eq '2' or usuario.usuario.perfil eq '5'}">

				<div class="ficha" style="width:50%">

					<!--		Mensagens de Erro		-->
					<p:messages id="messages" showDetail="true" autoUpdate="true"
						closable="true" />

					<p:steps activeIndex="1" styleClass="custom" readonly="true">
						<p:menuitem value="Entidade" url="#" />
						<p:menuitem value="Competências" url="#" />
					</p:steps>

					<h:outputText
						value="Os campos abaixo marcados com * são de preenchimento obrigatório."
						style="color:gray; align-self: flex-start; padding-top: 2vw;" />

					<p:panelGrid columns="3" style="margin-bottom:1vw; width:100%" layout="grid">

						<f:facet name="header">
							<p:row>
								<p:column colspan="1">
									<h:outputText value="Cadastro de Competências"
										style="color:#1a568c; font-size:25px; padding-bottom: 2vw;" />
								</p:column>
							</p:row>
						</f:facet>

						<h:outputLabel value="Órgão/Entidade:"/> 
						<br/> <h:outputText value=" " />
						<h:outputText id="redirect2" value="#{competencias.competencias.entidades.nome}" style="font-size:20px; padding-bottom: 2vw;"/>
						<br/> <h:outputText value=" " />

						<h:outputLabel value="Ações: " for="acoes" /> <br/> <h:outputText value=" " />
						<p:selectOneMenu id="acoes" value="#{competencias.idAcoes}" >
							<f:selectItem itemLabel="Selecione" itemValue="0" />
							<f:selectItems value="#{competencias.acoes}" var="acs" itemLabel="#{acs.titulo}" itemValue="#{acs.idAcoes}" />
						</p:selectOneMenu>

						<h:outputLabel value="Ou" style="margin-left: 1em" />
						<p:commandLink class="botaoLinkIcon" update="cad_competencias2"	onclick="PF('dlg2').show();">
							<i class="fa fa-plus" />
							<h:outputLabel value=" Nova ação" />
						</p:commandLink>
						
						<h:outputLabel value="Descrição: " for="descricao" /> <br/> <h:outputText value=" " />
						<p:inputTextarea id="descricao" cols="90" counter="display" value="#{competencias.competencias.descricao}" maxlength="200"
							autoResize="false" style="width:100%" counterTemplate="{0} caracteres restantes." /> <br/><h:outputText value=" " />
						<h:outputText id="display" />

					</p:panelGrid>
					
						<p:commandLink styleClass="botaoLink" action="#{competencias.addLista}" update="cad_competencias2" >
							<h:outputLabel value="Adicionar" />
							<i class="fa fa-plus" />
						</p:commandLink>
					

				</div>

					<h:panelGroup id="entidades_panel" style="margin-bottom:1vw; width: 80%">
							<p:dataTable id="table" var="comp" emptyMessage="Nenhuma competência criada"
								value="#{competencias.listCompetencias}">
								<f:facet name="header">
								            Competências
								        </f:facet>
								<p:column headerText="Órgão/Entidade">
									<h:outputText value="#{comp.entidades.nome}" />
								</p:column>
								<p:column headerText="Ações">
										<h:outputLabel value="#{comp.acoes.titulo}" />
								</p:column>
								<p:column headerText="Descrição">
									<p:inplace editor="true">
										<p:inputTextarea value="#{comp.descricao}" />
									</p:inplace>
								</p:column>
								<p:column style="width:32px;text-align: center">
									<p:commandLink  class="botaoLinkIcon" update="cad_competencias2"
										action="#{competencias.listaCompetenciasUpdate}" title="View">
										<i class=" fa fa-trash" />
										<f:setPropertyActionListener value="#{comp}"
											target="#{competencias.competencias}" />
									</p:commandLink> 
								</p:column>
							</p:dataTable>
						</h:panelGroup>

					<p:commandLink class="botaoLink" action="#{competencias.save}" style="margin-right: 10%">
						<h:outputText value="Salvar" />
						<i class="fa fa-check" style="color: white; padding-left: 3px" />
					</p:commandLink>
					
			</h:form>

			<p:dialog header="Cadastrar Nova Ação" widgetVar="dlg2" modal="true" resizable="false" >
<!-- 				<h:form> -->
<!-- 					<p:outputPanel id="dlg" style="width:640px; height: 480px"> -->
						<p:panelGrid columns="1" style="border:none; width: 60%;">
							<p:outputLabel value="Título:" for="titulo" />
							<p:inputText id="titulo" value="#{acoes.acao.titulo}" />

							<p:outputLabel value="Descrição:" for="descr" />
							<p:inputTextarea id="descr" cols="100" rows="8" counter="display" maxlength="200"
								autoResize="false" style="width:100%"
								counterTemplate="{0} caracteres restantes."
								value="#{acoes.acao.descricao}" />
							<h:outputText id="display" />

						</p:panelGrid>

						<p:commandLink class="botaoLink" actionListener="#{acoes.save()}" style="margin:0" update="@all" oncomplete="PF('dlg2').hide();">
							<h:outputText value="Salvar" />
							<i class="fa fa-check" style="padding-left: 3px" />
						</p:commandLink>

<!-- 					</p:outputPanel> -->
<!-- 				</h:form> -->

			</p:dialog>

		</ui:define>
	</ui:composition>

</h:body>
</html>

